{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./hero.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./hero.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subject, takeUntil } from 'rxjs';\nlet HeroComponent = class HeroComponent {\n  constructor(activatedRoute) {\n    this.activatedRoute = activatedRoute;\n    this.heroes = [];\n    this.ngUnsubscribe = new Subject();\n    this.isLoading = false;\n  }\n  ngOnInit() {\n    this.activatedRoute.data.pipe(takeUntil(this.ngUnsubscribe)).subscribe(results => {\n      this.heroes = results[\"resolvedData\"];\n    });\n  }\n  getRoleColor(role) {\n    switch (role.toLowerCase()) {\n      case 'vanguard':\n        return 'primary';\n      case 'assassin':\n        return 'warn';\n      default:\n        return '';\n    }\n  }\n  getDescription(ability) {\n    return ability.description + \"(\" + (ability.additional_fields?.['Team-Up Bonus'] || 'NoBonus') + \")\";\n  }\n  handleImageError(event, type) {\n    const img = event.target;\n    img.src = type === 'hero' ? 'assets/images/default-hero.webp' : 'assets/images/default-ability.webp';\n  }\n  getImageUrl(imagePath, type = 'hero') {\n    // Handle missing or invalid paths\n    if (!imagePath) {\n      return this.getFallbackImageUrl(type);\n    }\n    // Normalize path (remove leading/trailing slashes)\n    const normalizedPath = imagePath.replace(/^\\/+|\\/+$/g, '');\n    // Validate and construct URL\n    try {\n      const basePaths = {\n        hero: 'https://marvelrivalsapi.com/',\n        ability: 'https://marvelrivalsapi.com/rivals/'\n      };\n      return new URL(normalizedPath, basePaths[type]).href;\n    } catch {\n      return this.getFallbackImageUrl(type);\n    }\n  }\n  getFallbackImageUrl(type) {\n    return type === 'hero' ? 'assets/images/logo.png' : 'assets/images/logo.png';\n  }\n  ngOnDestroy() {\n    this.ngUnsubscribe.next(null);\n    this.ngUnsubscribe.complete();\n  }\n  static {\n    this.ctorParameters = () => [{\n      type: ActivatedRoute\n    }];\n  }\n};\nHeroComponent = __decorate([Component({\n  selector: 'mr-hero',\n  standalone: false,\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HeroComponent);\nexport { HeroComponent };","map":{"version":3,"names":["Component","ActivatedRoute","Subject","takeUntil","HeroComponent","constructor","activatedRoute","heroes","ngUnsubscribe","isLoading","ngOnInit","data","pipe","subscribe","results","getRoleColor","role","toLowerCase","getDescription","ability","description","additional_fields","handleImageError","event","type","img","target","src","getImageUrl","imagePath","getFallbackImageUrl","normalizedPath","replace","basePaths","hero","URL","href","ngOnDestroy","next","complete","__decorate","selector","standalone","template","__NG_CLI_RESOURCE__0"],"sources":["E:\\repos\\mrui-web\\src\\app\\heroes\\hero.component.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { IHero } from './data/models/hero.model';\r\nimport { Subject, takeUntil } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'mr-hero',\r\n  standalone: false,\r\n  templateUrl: './hero.component.html',\r\n  styleUrl: './hero.component.scss'\r\n})\r\nexport class HeroComponent implements OnInit, OnDestroy {\r\n  heroes: IHero[] = []\r\n  ngUnsubscribe = new Subject();\r\n  isLoading: boolean = false;\r\n\r\n  constructor(private activatedRoute: ActivatedRoute){}\r\n\r\n  ngOnInit(): void{\r\n    this.activatedRoute.data.pipe(takeUntil(this.ngUnsubscribe)).subscribe((results) =>{\r\n      this.heroes = results[\"resolvedData\"];\r\n    })\r\n  }\r\n\r\n  getRoleColor(role: string): string {\r\n    switch(role.toLowerCase()) {\r\n      case 'vanguard': return 'primary';\r\n      case 'assassin': return 'warn';\r\n      default: return '';\r\n    }\r\n  }\r\n\r\n  getDescription(ability: any): string{\r\n    return ability.description + \"(\" + (ability.additional_fields?.['Team-Up Bonus'] || 'NoBonus') + \")\" ;\r\n  }\r\n\r\n  handleImageError(event: Event, type: 'hero' | 'ability') {\r\n    const img = event.target as HTMLImageElement;\r\n    img.src = type === 'hero' \r\n      ? 'assets/images/default-hero.webp' \r\n      : 'assets/images/default-ability.webp';\r\n  }\r\n  getImageUrl(imagePath: string | undefined, type: 'hero' | 'ability' = 'hero'): string {\r\n    // Handle missing or invalid paths\r\n    if (!imagePath) {\r\n      return this.getFallbackImageUrl(type);\r\n    }\r\n\r\n    // Normalize path (remove leading/trailing slashes)\r\n    const normalizedPath = imagePath.replace(/^\\/+|\\/+$/g, '');\r\n\r\n    // Validate and construct URL\r\n    try {\r\n      const basePaths = {\r\n        hero: 'https://marvelrivalsapi.com/',\r\n        ability: 'https://marvelrivalsapi.com/rivals/'\r\n      };\r\n      return new URL(normalizedPath, basePaths[type]).href;\r\n    } catch {\r\n      return this.getFallbackImageUrl(type);\r\n    }\r\n  }\r\n\r\n  private getFallbackImageUrl(type: 'hero' | 'ability'): string {\r\n    return type === 'hero' \r\n      ? 'assets/images/logo.png'\r\n      : 'assets/images/logo.png';\r\n  }\r\n\r\n  ngOnDestroy(): void{\r\n    this.ngUnsubscribe.next(null);\r\n    this.ngUnsubscribe.complete();\r\n  }\r\n\r\n}\r\n"],"mappings":";;;AAAA,SAASA,SAAS,QAA2B,eAAe;AAC5D,SAASC,cAAc,QAAQ,iBAAiB;AAEhD,SAASC,OAAO,EAAEC,SAAS,QAAQ,MAAM;AAQlC,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAKxBC,YAAoBC,cAA8B;IAA9B,KAAAA,cAAc,GAAdA,cAAc;IAJlC,KAAAC,MAAM,GAAY,EAAE;IACpB,KAAAC,aAAa,GAAG,IAAIN,OAAO,EAAE;IAC7B,KAAAO,SAAS,GAAY,KAAK;EAE0B;EAEpDC,QAAQA,CAAA;IACN,IAAI,CAACJ,cAAc,CAACK,IAAI,CAACC,IAAI,CAACT,SAAS,CAAC,IAAI,CAACK,aAAa,CAAC,CAAC,CAACK,SAAS,CAAEC,OAAO,IAAI;MACjF,IAAI,CAACP,MAAM,GAAGO,OAAO,CAAC,cAAc,CAAC;IACvC,CAAC,CAAC;EACJ;EAEAC,YAAYA,CAACC,IAAY;IACvB,QAAOA,IAAI,CAACC,WAAW,EAAE;MACvB,KAAK,UAAU;QAAE,OAAO,SAAS;MACjC,KAAK,UAAU;QAAE,OAAO,MAAM;MAC9B;QAAS,OAAO,EAAE;IACpB;EACF;EAEAC,cAAcA,CAACC,OAAY;IACzB,OAAOA,OAAO,CAACC,WAAW,GAAG,GAAG,IAAID,OAAO,CAACE,iBAAiB,GAAG,eAAe,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG;EACtG;EAEAC,gBAAgBA,CAACC,KAAY,EAAEC,IAAwB;IACrD,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAA0B;IAC5CD,GAAG,CAACE,GAAG,GAAGH,IAAI,KAAK,MAAM,GACrB,iCAAiC,GACjC,oCAAoC;EAC1C;EACAI,WAAWA,CAACC,SAA6B,EAAEL,IAAA,GAA2B,MAAM;IAC1E;IACA,IAAI,CAACK,SAAS,EAAE;MACd,OAAO,IAAI,CAACC,mBAAmB,CAACN,IAAI,CAAC;IACvC;IAEA;IACA,MAAMO,cAAc,GAAGF,SAAS,CAACG,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;IAE1D;IACA,IAAI;MACF,MAAMC,SAAS,GAAG;QAChBC,IAAI,EAAE,8BAA8B;QACpCf,OAAO,EAAE;OACV;MACD,OAAO,IAAIgB,GAAG,CAACJ,cAAc,EAAEE,SAAS,CAACT,IAAI,CAAC,CAAC,CAACY,IAAI;IACtD,CAAC,CAAC,MAAM;MACN,OAAO,IAAI,CAACN,mBAAmB,CAACN,IAAI,CAAC;IACvC;EACF;EAEQM,mBAAmBA,CAACN,IAAwB;IAClD,OAAOA,IAAI,KAAK,MAAM,GAClB,wBAAwB,GACxB,wBAAwB;EAC9B;EAEAa,WAAWA,CAAA;IACT,IAAI,CAAC7B,aAAa,CAAC8B,IAAI,CAAC,IAAI,CAAC;IAC7B,IAAI,CAAC9B,aAAa,CAAC+B,QAAQ,EAAE;EAC/B;;;;;;;AA7DWnC,aAAa,GAAAoC,UAAA,EANzBxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,SAAS;EACnBC,UAAU,EAAE,KAAK;EACjBC,QAAA,EAAAC,oBAAoC;;CAErC,CAAC,C,EACWxC,aAAa,CA+DzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}